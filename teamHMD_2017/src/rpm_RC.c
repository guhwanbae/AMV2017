/*
 * rpm_RC.c
 *
 *  Created on: 2017. 6. 28.
 *      Author: ghbae
 */


/*
 * rpm_RC.c

 *
 *  Created on: 2017. 6. 27.
 *      Author: User
 */
#include "systemInit.h"
#include "encoder_set.h"
#include "Schedular.h"

/*******************************************************************************
 * Constant
 *******************************************************************************/
enccnt Car_rpm = 0;
enccnt Car_cnt=0;
enccnt Car_angle=0;
/*******************************************************************************
 * Define & MACRO
 *******************************************************************************/
#define PUL_REV 3000
#define SCH_TIME 10
/*******************************************************************************
 * Type Definition
 *******************************************************************************/

/*******************************************************************************
 * Prototypes of Local Functions
 *******************************************************************************/

/*******************************************************************************
 * Static Variable
 *******************************************************************************/

/*******************************************************************************
 * Exported Global Variables
 *******************************************************************************/
extern enccnt Front_cnt;


enccnt Car_rpm_find(void){

	//Car_rpm = Front_cnt * (57*60)/(48*SCH_TIME*PUL_REV);
	Car_rpm = (Front_cnt*60000)/(SCH_TIME*PUL_REV);
	Front_cnt = 0;
	return Car_rpm;
}

/*int Car_angle_find(void){


	//Car_cnt=Car_cnt+Front_cnt;

	Car_angle=(Car_cnt%PUL_REV)*360/PUL_REV;
	//Car_angle=(Car_cnt%1000)*360/1000;
	return Car_angle;
}*/

